erDiagram
    USER {
        int id PK
        string name
        string email
        string role
    }
    DOCTOR {
        int id PK
        string specialty
        string license_number
        int user_id FK
    }
    PATIENT {
        int id PK
        string insurance
        int user_id FK
    }
    APPOINTMENT {
        int id PK
        datetime time
        int patient_id FK
        int doctor_id FK
        string status
    }
    AVAILABILITY {
        int id PK
        int doctor_id FK
        string day_of_week
        time start_time
        time end_time
    }
    TIMEOFF {
        int id PK
        int doctor_id FK
        date start_date
        date end_date
        string reason
    }
    MEDICAL_RECORD {
        int id PK
        int appointment_id FK
        int patient_id FK
        int doctor_id FK
        string notes
        datetime created_at
    }
    AUDIT_LOG {
        int id PK
        int user_id FK
        string action
        datetime timestamp
    }
    USER ||--|| DOCTOR : "is a"
    USER ||--|| PATIENT : "is a"
    DOCTOR ||--o{ AVAILABILITY : "sets"
    DOCTOR ||--o{ TIMEOFF : "requests"
    PATIENT ||--o{ APPOINTMENT : "schedules"
    DOCTOR ||--o{ APPOINTMENT : "accepts"
    PATIENT ||--o{ MEDICAL_RECORD : "has"
    DOCTOR ||--o{ MEDICAL_RECORD : "writes"
    USER ||--o{ AUDIT_LOG : "logs"